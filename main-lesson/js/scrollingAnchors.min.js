"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var ScrollingAnchors = function (o) {
  function e(n) {
    if (t[n]) return t[n].exports;var r = t[n] = { exports: {}, id: n, loaded: !1 };return o[n].call(r.exports, r, r.exports, e), r.loaded = !0, r.exports;
  }var t = {};return e.m = o, e.c = t, e.p = "", e(0);
}([function (o, e, t) {
  "use strict";
  function n(o, e) {
    if (!o) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !e || "object" != (typeof e === "undefined" ? "undefined" : _typeof(e)) && "function" != typeof e ? o : e;
  }function r(o, e) {
    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + (typeof e === "undefined" ? "undefined" : _typeof(e)));o.prototype = Object.create(e && e.prototype, { constructor: { value: o, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(o, e) : o.__proto__ = e);
  }function i(o, e) {
    if (!(o instanceof e)) throw new TypeError("Cannot call a class as a function");
  }var s = function () {
    function o(o, e) {
      for (var t = 0; t < e.length; t++) {
        var n = e[t];n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(o, n.key, n);
      }
    }return function (e, t, n) {
      return t && o(e.prototype, t), n && o(e, n), e;
    };
  }(),
      c = t(1),
      a = function () {
    function o(e) {
      function t() {
        if (l.length) for (var e = 0; e < l.length; e++) {
          o.coordsOnScreen(a, l[e].coords) ? (l[e].onScreen || l[e].emit("onTheScreen", [l[e]]), l[e].onScreen = !0) : (l[e].onScreen && l[e].emit("notOnTheScreen", [l[e]]), l[e].onScreen = !1);
        }if (u.length) {
          f = 0;for (var t = 0, e = 0; e < u.length; e++) {
            h.onScreen = u[e].onScreen, h.position = u[e].position, u[e].onScreen = !1, u[e].coords.top > $(a).scrollTop() + $(a).height() && (u[e].position = "bottom"), u[e].coords.bottom < $(a).scrollTop() && (u[e].position = "top"), o.coordsOnScreen(a, u[e].coords.bottom) && !o.coordsOnScreen(a, u[e].coords.top) && (u[e].position = "top", u[e].onScreen = !0, u[e].visiblePart = u[e].coords.bottom - $(a).scrollTop()), o.coordsOnScreen(a, u[e].coords.bottom) && o.coordsOnScreen(a, u[e].coords.top) && (u[e].position = "middle", u[e].onScreen = !0, u[e].visiblePart = u[e].coords.bottom - u[e].coords.top), o.rangeLargerThanScreen(a, u[e].coords) && (u[e].position = "cover", u[e].onScreen = !0, u[e].visiblePart = $(a).height()), !o.coordsOnScreen(a, u[e].coords.bottom) && o.coordsOnScreen(a, u[e].coords.top) && (u[e].position = "bottom", u[e].onScreen = !0, u[e].visiblePart = $(a).scrollTop() + $(a).height() - u[e].coords.top), void 0 === h.onScreen ? u[e].onScreen ? u[e].emit("onTheScreen", [u[e]]) : u[e].emit("notOnTheScreen", [u[e]]) : h.onScreen !== u[e].onScreen && (u[e].onScreen ? u[e].emit("onTheScreen", [u[e]]) : u[e].emit("notOnTheScreen", [u[e]])), void 0 === h.position ? u[e].emit(u[e].position, [u[e]]) : h.position !== u[e].position && u[e].emit(u[e].position, [u[e]]);
          }for (var e = 0; e < u.length; e++) {
            t < u[e].visiblePart && (t = u[e].visiblePart, f = e);
          }for (var e = 0; e < u.length; e++) {
            e != f && (u[e].isMostNotablePrev = u[e].isMostNotable, u[e].isMostNotable = !1);
          }u[f].isMostNotablePrev = u[f].isMostNotable, u[f].isMostNotable = !0;for (var e = 0; e < u.length; e++) {
            void 0 === u[e].isMostNotablePrev ? u[e].isMostNotable ? u[e].emit("mostNotable", [u[e]]) : u[e].emit("notMostNotable", [u[e]]) : u[e].isMostNotablePrev !== u[e].isMostNotable && (u[e].isMostNotable ? u[e].emit("mostNotable", [u[e]]) : u[e].emit("notMostNotable", [u[e]]));
          }
        }if (p.length) for (var e = 0; e < p.length; e++) {
          p[e]({ anchors: l, ranges: u, mostNotableIndex: f });
        }
      }i(this, o);var s = this,
          a = e.parent ? e.parent : window,
          l = e.anchors ? e.anchors.map(function (o) {
        return new (function (e) {
          function t() {
            i(this, t);var e = n(this, Object.getPrototypeOf(t).call(this));return e.el = o.anchor, e.name = o.name, e.coords = $(o.anchor).offset().top, e.onScreen = null, e;
          }return r(t, e), t;
        }(c))();
      }) : [],
          u = e.ranges ? e.ranges.map(function (o) {
        return new (function (e) {
          function t() {
            i(this, t);var e = n(this, Object.getPrototypeOf(t).call(this));return e.el = o.range, e.name = o.name, e.coords = { top: $(o.range[0]).offset().top, bottom: $(o.range[1]).offset().top }, e.onScreen = void 0, e.position = void 0, e.isMostNotable = void 0, e.visiblePart = 0, e;
          }return r(t, e), t;
        }(c))();
      }) : [],
          f = null,
          p = [];this.routingTables = { anchors: function () {
          for (var o = {}, e = l.length; e--;) {
            o[l[e].name] = e;
          }return o;
        }(), ranges: function () {
          for (var o = {}, e = u.length; e--;) {
            o[u[e].name] = e;
          }return o;
        }() };var h = {};$(a).on("scroll", t), s.addListeners = function (o) {
        p.push(o), t();
      }, s.get = function (o) {
        return "anchors" === o ? l : "ranges" === o ? u : void 0;
      };
    }return s(o, [{ key: "on", value: function value(o, e) {
        function t(o) {
          return !isNaN(parseFloat(o)) && isFinite(o);
        }try {
          var n = o.split(":"),
              o = n[0],
              r = n[1],
              i = n[2];return t(i) ? this.get(r)[i].on(o, e) : this.get(r)[this.routingTables[r][i]].on(o, e), !0;
        } catch (s) {
          console.log(o), console.log(r), console.log(i), console.log(s), console.log("parse error. maybe incorrectly stated the name");
        }
      } }], [{ key: "coordsOnScreen", value: function value(o, e) {
        var t = $(o).scrollTop(),
            n = $(o).scrollTop() + $(o).height();return e >= t && n >= e;
      } }, { key: "rangeLargerThanScreen", value: function value(o, e) {
        var t = $(o).scrollTop(),
            n = $(o).scrollTop() + $(o).height();return e.top < t && e.bottom > n;
      } }]), o;
  }();o.exports = a;
}, function (o, e) {
  "use strict";
  function t(o, e) {
    if (!(o instanceof e)) throw new TypeError("Cannot call a class as a function");
  }var n = function () {
    function o(o, e) {
      for (var t = 0; t < e.length; t++) {
        var n = e[t];n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(o, n.key, n);
      }
    }return function (e, t, n) {
      return t && o(e.prototype, t), n && o(e, n), e;
    };
  }(),
      r = function () {
    function o() {
      t(this, o), this.repository = {};
    }return n(o, [{ key: "on", value: function value(o, e) {
        var t = this.repository[o];return t ? t.push(e) : this.repository[o] = [e], this;
      } }, { key: "off", value: function value(o, e) {
        var t = this.repository[o];return t && t.splice(t.indexOf(e)), this;
      } }, { key: "emit", value: function value(o, e, t) {
        t = t ? t : this, e = e ? e : [];var n = this.repository[o];if (n) for (var r = 0, i = n.length; i > r; r++) {
          n[r].apply(t, e);
        }return this;
      } }, { key: "allEvents", get: function get() {
        var o = [];for (var e in this.repository) {
          o.push(e);
        }return o;
      } }]), o;
  }();o.exports = r;
}]);
